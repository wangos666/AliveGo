{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { defineStore } from \"pinia\";\nimport { reqGetCode, reqRegister, reqLogin, reqGetUserInfo, reqLogOut } from \"@/api\";\nimport { getToken } from \"@/utils/token\";\nexport default defineStore('user', {\n  state: () => {\n    return {\n      code: '',\n      token: getToken(),\n      userInfo: {}\n    };\n  },\n  getters: {},\n  actions: {\n    getCode(phone) {\n      reqGetCode(phone).then(res => this.code = res.data);\n    },\n\n    async register(params) {\n      let result = await reqRegister(params);\n\n      if (result.code == 200) {\n        return 'ok';\n      } else {\n        return Promise.reject(new Error(result.message));\n      }\n    },\n\n    async login(params) {\n      let result = await reqLogin(params);\n\n      if (result.code == 200) {\n        this.token = result.data.token;\n        localStorage.setItem('token', result.data.token);\n        return 'ok';\n      } else {\n        return Promise.reject(new Error(result.message));\n      }\n    },\n\n    getUserInfo() {\n      reqGetUserInfo().then(res => this.userInfo = res.data);\n    },\n\n    async outLogin() {\n      let result = await reqLogOut();\n\n      if (result.code == 200) {\n        localStorage.removeItem('token');\n        this.userInfo = {};\n        this.token = '';\n        return 'ok';\n      } else {\n        return Promise.reject(new Error(result.message));\n      }\n    }\n\n  }\n});","map":{"version":3,"names":["defineStore","reqGetCode","reqRegister","reqLogin","reqGetUserInfo","reqLogOut","getToken","state","code","token","userInfo","getters","actions","getCode","phone","then","res","data","register","params","result","Promise","reject","Error","message","login","localStorage","setItem","getUserInfo","outLogin","removeItem"],"sources":["D:/web/Vue/shop/src/store/User/index.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport { reqGetCode, reqRegister, reqLogin, reqGetUserInfo, reqLogOut } from \"@/api\";\r\nimport { getToken } from \"@/utils/token\";\r\nexport default defineStore('user', {\r\n    state: () => {\r\n        return {\r\n            code: '',\r\n            token: getToken(),\r\n            userInfo: {}\r\n        }\r\n    },\r\n    getters: {\r\n\r\n    },\r\n    actions: {\r\n        getCode(phone) {\r\n            reqGetCode(phone).then(\r\n                res => this.code = res.data\r\n            )\r\n        },\r\n        async register(params) {\r\n            let result = await reqRegister(params)\r\n            if (result.code == 200) {\r\n                return 'ok'\r\n            } else {\r\n                return Promise.reject(new Error(result.message))\r\n            }\r\n        },\r\n        async login(params) {\r\n            let result = await reqLogin(params)\r\n            if (result.code == 200) {\r\n                this.token = result.data.token\r\n                localStorage.setItem('token', result.data.token)\r\n                return 'ok'\r\n            } else {\r\n                return Promise.reject(new Error(result.message))\r\n            }\r\n        },\r\n        getUserInfo() {\r\n            reqGetUserInfo().then(\r\n                res => this.userInfo = res.data\r\n            )\r\n        },\r\n        async outLogin() {\r\n            let result = await reqLogOut()\r\n            if (result.code == 200) {\r\n                localStorage.removeItem('token')\r\n                this.userInfo = {}\r\n                this.token = ''\r\n                return 'ok'\r\n            } else {\r\n                return Promise.reject(new Error(result.message))\r\n            }\r\n\r\n        }\r\n    }\r\n})"],"mappings":";AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,SAASC,UAAT,EAAqBC,WAArB,EAAkCC,QAAlC,EAA4CC,cAA5C,EAA4DC,SAA5D,QAA6E,OAA7E;AACA,SAASC,QAAT,QAAyB,eAAzB;AACA,eAAeN,WAAW,CAAC,MAAD,EAAS;EAC/BO,KAAK,EAAE,MAAM;IACT,OAAO;MACHC,IAAI,EAAE,EADH;MAEHC,KAAK,EAAEH,QAAQ,EAFZ;MAGHI,QAAQ,EAAE;IAHP,CAAP;EAKH,CAP8B;EAQ/BC,OAAO,EAAE,EARsB;EAW/BC,OAAO,EAAE;IACLC,OAAO,CAACC,KAAD,EAAQ;MACXb,UAAU,CAACa,KAAD,CAAV,CAAkBC,IAAlB,CACIC,GAAG,IAAI,KAAKR,IAAL,GAAYQ,GAAG,CAACC,IAD3B;IAGH,CALI;;IAML,MAAMC,QAAN,CAAeC,MAAf,EAAuB;MACnB,IAAIC,MAAM,GAAG,MAAMlB,WAAW,CAACiB,MAAD,CAA9B;;MACA,IAAIC,MAAM,CAACZ,IAAP,IAAe,GAAnB,EAAwB;QACpB,OAAO,IAAP;MACH,CAFD,MAEO;QACH,OAAOa,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUH,MAAM,CAACI,OAAjB,CAAf,CAAP;MACH;IACJ,CAbI;;IAcL,MAAMC,KAAN,CAAYN,MAAZ,EAAoB;MAChB,IAAIC,MAAM,GAAG,MAAMjB,QAAQ,CAACgB,MAAD,CAA3B;;MACA,IAAIC,MAAM,CAACZ,IAAP,IAAe,GAAnB,EAAwB;QACpB,KAAKC,KAAL,GAAaW,MAAM,CAACH,IAAP,CAAYR,KAAzB;QACAiB,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,MAAM,CAACH,IAAP,CAAYR,KAA1C;QACA,OAAO,IAAP;MACH,CAJD,MAIO;QACH,OAAOY,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUH,MAAM,CAACI,OAAjB,CAAf,CAAP;MACH;IACJ,CAvBI;;IAwBLI,WAAW,GAAG;MACVxB,cAAc,GAAGW,IAAjB,CACIC,GAAG,IAAI,KAAKN,QAAL,GAAgBM,GAAG,CAACC,IAD/B;IAGH,CA5BI;;IA6BL,MAAMY,QAAN,GAAiB;MACb,IAAIT,MAAM,GAAG,MAAMf,SAAS,EAA5B;;MACA,IAAIe,MAAM,CAACZ,IAAP,IAAe,GAAnB,EAAwB;QACpBkB,YAAY,CAACI,UAAb,CAAwB,OAAxB;QACA,KAAKpB,QAAL,GAAgB,EAAhB;QACA,KAAKD,KAAL,GAAa,EAAb;QACA,OAAO,IAAP;MACH,CALD,MAKO;QACH,OAAOY,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUH,MAAM,CAACI,OAAjB,CAAf,CAAP;MACH;IAEJ;;EAxCI;AAXsB,CAAT,CAA1B"},"metadata":{},"sourceType":"module"}