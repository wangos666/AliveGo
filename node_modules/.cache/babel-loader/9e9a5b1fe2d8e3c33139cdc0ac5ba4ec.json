{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { defineStore } from \"pinia\";\nimport { reqGetCartList, reqDeleteCartById, reqUpdateCheckedById } from \"@/api\";\nexport default defineStore('shopcart', {\n  state: () => {\n    return {\n      cartList: []\n    };\n  },\n  getters: {\n    cartInfoList() {\n      let res = this.cartList[0] !== undefined ? this.cartList[0].cartInfoList : [];\n      return res;\n    }\n\n  },\n  actions: {\n    getCartList() {\n      reqGetCartList().then(res => {\n        this.cartList = res.data;\n      });\n    },\n\n    async deleteCartById(skuId) {\n      let result = await reqDeleteCartById(skuId);\n\n      if (result.code == 200) {\n        return 'ok';\n      } else {\n        Promise.reject(new Error('faile'));\n      }\n    },\n\n    async updateCheckedById(skuId, isChecked) {\n      let result = await reqUpdateCheckedById(skuId, isChecked);\n\n      if (result.code == 200) {\n        return 'ok';\n      } else {\n        Promise.reject(new Error('faile'));\n      }\n    },\n\n    deleteAllCheckedCart() {\n      let promiseAll = [];\n      this.cartInfoList.forEach(element => {\n        if (element.isChecked === 1) {\n          let promise = this.deleteCartById(element.skuId);\n          promiseAll.push(promise);\n        }\n      });\n      return Promise.all(promiseAll);\n    }\n\n  }\n});","map":{"version":3,"names":["defineStore","reqGetCartList","reqDeleteCartById","reqUpdateCheckedById","state","cartList","getters","cartInfoList","res","undefined","actions","getCartList","then","data","deleteCartById","skuId","result","code","Promise","reject","Error","updateCheckedById","isChecked","deleteAllCheckedCart","promiseAll","forEach","element","promise","push","all"],"sources":["D:/web/Vue/shop/src/store/Shopcart/index.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport { reqGetCartList, reqDeleteCartById, reqUpdateCheckedById } from \"@/api\";\r\nexport default defineStore('shopcart', {\r\n    state: () => {\r\n        return {\r\n            cartList: []\r\n        }\r\n    },\r\n    getters: {\r\n        cartInfoList() {\r\n            let res = this.cartList[0] !== undefined ? this.cartList[0].cartInfoList : []\r\n            return res\r\n        }\r\n    },\r\n    actions: {\r\n        getCartList() {\r\n            reqGetCartList().then(\r\n                res => {\r\n                    this.cartList = res.data\r\n                }\r\n            )\r\n        },\r\n        async deleteCartById(skuId) {\r\n            let result = await reqDeleteCartById(skuId)\r\n            if (result.code == 200) {\r\n                return 'ok'\r\n            } else {\r\n                Promise.reject(new Error('faile'))\r\n            }\r\n        },\r\n        async updateCheckedById(skuId, isChecked) {\r\n            let result = await reqUpdateCheckedById(skuId, isChecked)\r\n            if (result.code == 200) {\r\n                return 'ok'\r\n            } else {\r\n                Promise.reject(new Error('faile'))\r\n            }\r\n        },\r\n        deleteAllCheckedCart() {\r\n            let promiseAll = []\r\n            this.cartInfoList.forEach(element => {\r\n                if (element.isChecked === 1) {\r\n                    let promise = this.deleteCartById(element.skuId)\r\n                    promiseAll.push(promise)\r\n                }\r\n            })\r\n            return Promise.all(promiseAll)\r\n        }\r\n    }\r\n\r\n})"],"mappings":";AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,SAASC,cAAT,EAAyBC,iBAAzB,EAA4CC,oBAA5C,QAAwE,OAAxE;AACA,eAAeH,WAAW,CAAC,UAAD,EAAa;EACnCI,KAAK,EAAE,MAAM;IACT,OAAO;MACHC,QAAQ,EAAE;IADP,CAAP;EAGH,CALkC;EAMnCC,OAAO,EAAE;IACLC,YAAY,GAAG;MACX,IAAIC,GAAG,GAAG,KAAKH,QAAL,CAAc,CAAd,MAAqBI,SAArB,GAAiC,KAAKJ,QAAL,CAAc,CAAd,EAAiBE,YAAlD,GAAiE,EAA3E;MACA,OAAOC,GAAP;IACH;;EAJI,CAN0B;EAYnCE,OAAO,EAAE;IACLC,WAAW,GAAG;MACVV,cAAc,GAAGW,IAAjB,CACIJ,GAAG,IAAI;QACH,KAAKH,QAAL,GAAgBG,GAAG,CAACK,IAApB;MACH,CAHL;IAKH,CAPI;;IAQL,MAAMC,cAAN,CAAqBC,KAArB,EAA4B;MACxB,IAAIC,MAAM,GAAG,MAAMd,iBAAiB,CAACa,KAAD,CAApC;;MACA,IAAIC,MAAM,CAACC,IAAP,IAAe,GAAnB,EAAwB;QACpB,OAAO,IAAP;MACH,CAFD,MAEO;QACHC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAU,OAAV,CAAf;MACH;IACJ,CAfI;;IAgBL,MAAMC,iBAAN,CAAwBN,KAAxB,EAA+BO,SAA/B,EAA0C;MACtC,IAAIN,MAAM,GAAG,MAAMb,oBAAoB,CAACY,KAAD,EAAQO,SAAR,CAAvC;;MACA,IAAIN,MAAM,CAACC,IAAP,IAAe,GAAnB,EAAwB;QACpB,OAAO,IAAP;MACH,CAFD,MAEO;QACHC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAU,OAAV,CAAf;MACH;IACJ,CAvBI;;IAwBLG,oBAAoB,GAAG;MACnB,IAAIC,UAAU,GAAG,EAAjB;MACA,KAAKjB,YAAL,CAAkBkB,OAAlB,CAA0BC,OAAO,IAAI;QACjC,IAAIA,OAAO,CAACJ,SAAR,KAAsB,CAA1B,EAA6B;UACzB,IAAIK,OAAO,GAAG,KAAKb,cAAL,CAAoBY,OAAO,CAACX,KAA5B,CAAd;UACAS,UAAU,CAACI,IAAX,CAAgBD,OAAhB;QACH;MACJ,CALD;MAMA,OAAOT,OAAO,CAACW,GAAR,CAAYL,UAAZ,CAAP;IACH;;EAjCI;AAZ0B,CAAb,CAA1B"},"metadata":{},"sourceType":"module"}