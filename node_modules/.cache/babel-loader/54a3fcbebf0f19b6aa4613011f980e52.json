{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { defineStore } from \"pinia\";\nimport { reqGetCode, reqRegister, reqLogin } from \"@/api\";\nexport default defineStore('user', {\n  state: () => {\n    return {\n      code: '',\n      token: ''\n    };\n  },\n  getters: {},\n  actions: {\n    getCode(phone) {\n      reqGetCode(phone).then(res => this.code = res.data);\n    },\n\n    async register(params) {\n      let result = await reqRegister(params);\n\n      if (result.code == 200) {\n        return 'ok';\n      } else {\n        return Promise.reject(new Error(result.message));\n      }\n    },\n\n    async login(params) {\n      let result = await reqLogin(params);\n\n      if (result.code == 200) {\n        this.token = result.data.token;\n        localStorage.setItem('token', result.data.token);\n        return 'ok';\n      } else {\n        return Promise.reject(new Error(result.message));\n      }\n    }\n\n  }\n});","map":{"version":3,"names":["defineStore","reqGetCode","reqRegister","reqLogin","state","code","token","getters","actions","getCode","phone","then","res","data","register","params","result","Promise","reject","Error","message","login","localStorage","setItem"],"sources":["D:/web/Vue/shop/src/store/User/index.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport { reqGetCode, reqRegister, reqLogin } from \"@/api\";\r\nexport default defineStore('user', {\r\n    state: () => {\r\n        return {\r\n            code: '',\r\n            token: '',\r\n        }\r\n    },\r\n    getters: {\r\n\r\n    },\r\n    actions: {\r\n        getCode(phone) {\r\n            reqGetCode(phone).then(\r\n                res => this.code = res.data\r\n            )\r\n        },\r\n        async register(params) {\r\n            let result = await reqRegister(params)\r\n            if (result.code == 200) {\r\n                return 'ok'\r\n            } else {\r\n                return Promise.reject(new Error(result.message))\r\n            }\r\n        },\r\n        async login(params) {\r\n            let result = await reqLogin(params)\r\n            if (result.code == 200) {\r\n                this.token = result.data.token\r\n                localStorage.setItem('token', result.data.token)\r\n                return 'ok'\r\n            } else {\r\n                return Promise.reject(new Error(result.message))\r\n            }\r\n        }\r\n    }\r\n})"],"mappings":";AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,SAASC,UAAT,EAAqBC,WAArB,EAAkCC,QAAlC,QAAkD,OAAlD;AACA,eAAeH,WAAW,CAAC,MAAD,EAAS;EAC/BI,KAAK,EAAE,MAAM;IACT,OAAO;MACHC,IAAI,EAAE,EADH;MAEHC,KAAK,EAAE;IAFJ,CAAP;EAIH,CAN8B;EAO/BC,OAAO,EAAE,EAPsB;EAU/BC,OAAO,EAAE;IACLC,OAAO,CAACC,KAAD,EAAQ;MACXT,UAAU,CAACS,KAAD,CAAV,CAAkBC,IAAlB,CACIC,GAAG,IAAI,KAAKP,IAAL,GAAYO,GAAG,CAACC,IAD3B;IAGH,CALI;;IAML,MAAMC,QAAN,CAAeC,MAAf,EAAuB;MACnB,IAAIC,MAAM,GAAG,MAAMd,WAAW,CAACa,MAAD,CAA9B;;MACA,IAAIC,MAAM,CAACX,IAAP,IAAe,GAAnB,EAAwB;QACpB,OAAO,IAAP;MACH,CAFD,MAEO;QACH,OAAOY,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUH,MAAM,CAACI,OAAjB,CAAf,CAAP;MACH;IACJ,CAbI;;IAcL,MAAMC,KAAN,CAAYN,MAAZ,EAAoB;MAChB,IAAIC,MAAM,GAAG,MAAMb,QAAQ,CAACY,MAAD,CAA3B;;MACA,IAAIC,MAAM,CAACX,IAAP,IAAe,GAAnB,EAAwB;QACpB,KAAKC,KAAL,GAAaU,MAAM,CAACH,IAAP,CAAYP,KAAzB;QACAgB,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,MAAM,CAACH,IAAP,CAAYP,KAA1C;QACA,OAAO,IAAP;MACH,CAJD,MAIO;QACH,OAAOW,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUH,MAAM,CAACI,OAAjB,CAAf,CAAP;MACH;IACJ;;EAvBI;AAVsB,CAAT,CAA1B"},"metadata":{},"sourceType":"module"}