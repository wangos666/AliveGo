{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, unref as _unref, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from './images/cartEmpty.png';\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5ca3fd8e\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"cart\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"全部商品\", -1));\n\nconst _hoisted_3 = {\n  class: \"cart-main\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"cart-th\\\" data-v-5ca3fd8e><div class=\\\"cart-th1\\\" data-v-5ca3fd8e>全部</div><div class=\\\"cart-th2\\\" data-v-5ca3fd8e>商品</div><div class=\\\"cart-th3\\\" data-v-5ca3fd8e>单价（元）</div><div class=\\\"cart-th4\\\" data-v-5ca3fd8e>数量</div><div class=\\\"cart-th5\\\" data-v-5ca3fd8e>小计（元）</div><div class=\\\"cart-th6\\\" data-v-5ca3fd8e>操作</div></div>\", 1);\n\nconst _hoisted_5 = {\n  class: \"cart-body\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"cart-list\"\n};\nconst _hoisted_7 = {\n  class: \"empty\"\n};\nconst _hoisted_8 = {\n  class: \"item\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"left\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"\"\n})], -1));\n\nconst _hoisted_10 = {\n  class: \"right\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \" 购物车空空的哦~，去看看心仪的商品吧~\", -1));\n\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\n\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\"去购物>\");\n\nconst _hoisted_14 = {\n  class: \"cart-list-con1\"\n};\nconst _hoisted_15 = [\"checked\", \"onChange\"];\nconst _hoisted_16 = {\n  class: \"cart-list-con2\"\n};\nconst _hoisted_17 = [\"src\"];\nconst _hoisted_18 = {\n  class: \"item-msg\"\n};\n\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"li\", {\n  class: \"cart-list-con3\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"item-txt\"\n}, \"官方标配\")], -1));\n\nconst _hoisted_20 = {\n  class: \"cart-list-con4\"\n};\nconst _hoisted_21 = {\n  class: \"price\"\n};\nconst _hoisted_22 = {\n  class: \"cart-list-con5\"\n};\nconst _hoisted_23 = [\"onClick\"];\nconst _hoisted_24 = [\"value\", \"onChange\"];\nconst _hoisted_25 = [\"onClick\"];\nconst _hoisted_26 = {\n  class: \"cart-list-con6\"\n};\nconst _hoisted_27 = {\n  class: \"sum\"\n};\nconst _hoisted_28 = {\n  class: \"cart-list-con7\"\n};\nconst _hoisted_29 = [\"onClick\"];\n\nconst _hoisted_30 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\n\nconst _hoisted_31 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"#none\"\n}, \"移到收藏\", -1));\n\nconst _hoisted_32 = {\n  class: \"cart-tool\"\n};\nconst _hoisted_33 = {\n  class: \"select-all\"\n};\nconst _hoisted_34 = [\"checked\"];\n\nconst _hoisted_35 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"全选\", -1));\n\nconst _hoisted_36 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"#none\"\n}, \"移到我的关注\", -1));\n\nconst _hoisted_37 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"#none\"\n}, \"清除下柜商品\", -1));\n\nconst _hoisted_38 = {\n  class: \"money-box\"\n};\nconst _hoisted_39 = {\n  class: \"chosed\"\n};\n\nconst _hoisted_40 = /*#__PURE__*/_createTextVNode(\"已选择 \");\n\nconst _hoisted_41 = /*#__PURE__*/_createTextVNode(\"件商品 \");\n\nconst _hoisted_42 = {\n  class: \"sumprice\"\n};\n\nconst _hoisted_43 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"em\", null, \"总价（不含运费） ：\", -1));\n\nconst _hoisted_44 = {\n  class: \"summoney\"\n};\nconst _hoisted_45 = {\n  class: \"sumbtn\"\n};\n\nconst _hoisted_46 = /*#__PURE__*/_createTextVNode(\"结算\");\n\nconst __default__ = {\n  name: 'ShopCart'\n};\nimport useShopcartStore from '@/store/Shopcart';\nimport useDetailStore from '@/store/Detail';\nimport { storeToRefs } from 'pinia';\nimport { computed, onMounted } from 'vue';\nexport default /*#__PURE__*/Object.assign(__default__, {\n  setup(__props) {\n    const store = useShopcartStore();\n    const detailStore = useDetailStore();\n    let {\n      cartList,\n      cartInfoList\n    } = storeToRefs(store);\n    onMounted(() => {\n      store.getCartList();\n    });\n    let totalPrice = computed(() => {\n      let sum = 0;\n      cartInfoList.value.forEach(element => {\n        if (element.isChecked == 1) {\n          sum += element.skuPrice * element.skuNum;\n        }\n      });\n      return sum;\n    });\n    let totalChecked = computed(() => {\n      let sum = 0;\n      cartInfoList.value.forEach(element => {\n        if (element.isChecked == 1) {\n          sum += 1;\n        }\n      });\n      return sum;\n    });\n    let isAllChecked = computed(() => {\n      return cartInfoList.value.every(item => item.isChecked == 1);\n    });\n\n    async function handleCheck(item) {\n      try {\n        await store.updateCheckedById(item.skuId, 1 - item.isChecked);\n        store.getCartList();\n      } catch (error) {\n        alert(error.message);\n      }\n    }\n\n    async function handler(type, disNum, cart) {\n      switch (type) {\n        case 'plus':\n          disNum = 1;\n          break;\n\n        case 'mins':\n          disNum = cart.skuNum > 1 ? -1 : 0;\n          break;\n\n        case 'change':\n          disNum = isNaN(disNum) || disNum < 1 ? 0 : parseInt(disNum) - cart.skuNum;\n          break;\n      }\n\n      try {\n        await detailStore.addOrUpdateShopCar(cart.skuId, disNum);\n        store.getCartList();\n      } catch (error) {\n        alert(error.message);\n      }\n    }\n\n    async function deleteCart(skuId) {\n      try {\n        await store.deleteCartById(skuId);\n        store.getCartList();\n      } catch (error) {\n        alert(error.message);\n      }\n    }\n\n    async function deleteAllChecked() {\n      try {\n        await store.deleteAllCheckedCart();\n        store.getCartList();\n      } catch (error) {\n        alert(error.message);\n      }\n    }\n\n    async function handleAllChecked() {\n      let isChecked = 1 - isAllChecked.value;\n\n      try {\n        await store.updateAllChecked(isChecked);\n        store.getCartList();\n      } catch (error) {\n        alert(error.message);\n      }\n    }\n\n    return (_ctx, _cache) => {\n      const _component_TypeNav = _resolveComponent(\"TypeNav\");\n\n      const _component_router_link = _resolveComponent(\"router-link\");\n\n      return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_TypeNav), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"div\", _hoisted_5, [!_unref(cartInfoList)[0] ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _hoisted_12, _createVNode(_component_router_link, {\n        to: \"/home\"\n      }, {\n        default: _withCtx(() => [_hoisted_13]),\n        _: 1\n      })])])])])) : _createCommentVNode(\"\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(cartInfoList), item => {\n        return _openBlock(), _createElementBlock(\"ul\", {\n          class: \"cart-list\",\n          key: item.id\n        }, [_createElementVNode(\"li\", _hoisted_14, [_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          name: \"chk_list\",\n          checked: item.isChecked == 1,\n          onChange: $event => handleCheck(item)\n        }, null, 40, _hoisted_15)]), _createElementVNode(\"li\", _hoisted_16, [_createElementVNode(\"img\", {\n          src: item.imgUrl\n        }, null, 8, _hoisted_17), _createElementVNode(\"div\", _hoisted_18, _toDisplayString(item.skuName), 1)]), _hoisted_19, _createElementVNode(\"li\", _hoisted_20, [_createElementVNode(\"span\", _hoisted_21, _toDisplayString(item.skuPrice), 1)]), _createElementVNode(\"li\", _hoisted_22, [_createElementVNode(\"a\", {\n          href: \"javascript:void(0)\",\n          class: \"mins\",\n          onClick: $event => handler('mins', -1, item)\n        }, \"-\", 8, _hoisted_23), _createElementVNode(\"input\", {\n          autocomplete: \"off\",\n          type: \"number\",\n          value: item.skuNum,\n          minnum: \"1\",\n          class: \"itxt\",\n          onChange: $event => handler('change', $event.target.value * 1, item)\n        }, null, 40, _hoisted_24), _createElementVNode(\"a\", {\n          href: \"javascript:void(0)\",\n          class: \"plus\",\n          onClick: $event => handler('plus', 1, item)\n        }, \"+\", 8, _hoisted_25)]), _createElementVNode(\"li\", _hoisted_26, [_createElementVNode(\"span\", _hoisted_27, _toDisplayString(item.skuPrice * item.skuNum), 1)]), _createElementVNode(\"li\", _hoisted_28, [_createElementVNode(\"a\", {\n          href: \"javascript:void(0)\",\n          class: \"sindelet\",\n          onClick: $event => deleteCart(item.skuId)\n        }, \"删除\", 8, _hoisted_29), _hoisted_30, _hoisted_31])]);\n      }), 128))])]), _createElementVNode(\"div\", _hoisted_32, [_createElementVNode(\"div\", _hoisted_33, [_createElementVNode(\"input\", {\n        class: \"chooseAll\",\n        type: \"checkbox\",\n        checked: _unref(isAllChecked),\n        onChange: handleAllChecked\n      }, null, 40, _hoisted_34), _hoisted_35]), _createElementVNode(\"div\", {\n        class: \"option\"\n      }, [_createElementVNode(\"a\", {\n        href: \"javascript:void(0)\",\n        onClick: deleteAllChecked\n      }, \"删除选中的商品\"), _hoisted_36, _hoisted_37]), _createElementVNode(\"div\", _hoisted_38, [_createElementVNode(\"div\", _hoisted_39, [_hoisted_40, _createElementVNode(\"span\", null, _toDisplayString(_unref(totalChecked)), 1), _hoisted_41]), _createElementVNode(\"div\", _hoisted_42, [_hoisted_43, _createElementVNode(\"i\", _hoisted_44, \"¥ \" + _toDisplayString(_unref(totalPrice)), 1)]), _createElementVNode(\"div\", _hoisted_45, [_createVNode(_component_router_link, {\n        class: \"sum-btn\",\n        to: \"/trade\"\n      }, {\n        default: _withCtx(() => [_hoisted_46]),\n        _: 1\n      })])])])])], 64);\n    };\n  }\n\n});","map":{"version":3,"mappings":"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","names":["name","useShopcartStore","useDetailStore","storeToRefs","computed","onMounted","store","detailStore","cartList","cartInfoList","getCartList","totalPrice","sum","value","forEach","element","isChecked","skuPrice","skuNum","totalChecked","isAllChecked","every","item","handleCheck","updateCheckedById","skuId","error","alert","message","handler","type","disNum","cart","isNaN","parseInt","addOrUpdateShopCar","deleteCart","deleteCartById","deleteAllChecked","deleteAllCheckedCart","handleAllChecked","updateAllChecked"],"sources":["D:/web/Vue/shop/src/pages/ShopCart/index.vue"],"sourcesContent":["<template>\r\n  <TypeNav></TypeNav>\r\n  <div class=\"cart\">\r\n    <h4>全部商品</h4>\r\n    <div class=\"cart-main\">\r\n      <div class=\"cart-th\">\r\n        <div class=\"cart-th1\">全部</div>\r\n        <div class=\"cart-th2\">商品</div>\r\n        <div class=\"cart-th3\">单价（元）</div>\r\n        <div class=\"cart-th4\">数量</div>\r\n        <div class=\"cart-th5\">小计（元）</div>\r\n        <div class=\"cart-th6\">操作</div>\r\n      </div>\r\n      <div class=\"cart-body\">\r\n        <ul class=\"cart-list\" v-if=\"!cartInfoList[0]\">\r\n          <div class=\"empty\">\r\n            <div class=\"item\">\r\n              <div class=\"left\">\r\n                <img src=\"./images/cartEmpty.png\" alt=\"\">\r\n              </div>\r\n              <div class=\"right\">\r\n                <div> 购物车空空的哦~，去看看心仪的商品吧~</div><br>\r\n                <router-link to=\"/home\">去购物></router-link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ul>\r\n        <ul class=\"cart-list\" v-for=\"item in cartInfoList\" :key=\"item.id\">\r\n          <li class=\"cart-list-con1\">\r\n            <input type=\"checkbox\" name=\"chk_list\" :checked=\"item.isChecked == 1\" @change=\"handleCheck(item)\">\r\n          </li>\r\n          <li class=\"cart-list-con2\">\r\n            <img :src=\"item.imgUrl\">\r\n            <div class=\"item-msg\">{{ item.skuName }}</div>\r\n          </li>\r\n          <li class=\"cart-list-con3\">\r\n            <div class=\"item-txt\">官方标配</div>\r\n          </li>\r\n          <li class=\"cart-list-con4\">\r\n            <span class=\"price\">{{ item.skuPrice }}</span>\r\n          </li>\r\n          <li class=\"cart-list-con5\">\r\n            <a href=\"javascript:void(0)\" class=\"mins\" @click=\"handler('mins', -1, item)\">-</a>\r\n            <input autocomplete=\"off\" type=\"number\" :value=\"item.skuNum\" minnum=\"1\" class=\"itxt\"\r\n              @change=\"handler('change', $event.target.value * 1, item)\">\r\n            <a href=\"javascript:void(0)\" class=\"plus\" @click=\"handler('plus', 1, item)\">+</a>\r\n          </li>\r\n          <li class=\"cart-list-con6\">\r\n            <span class=\"sum\">{{ item.skuPrice * item.skuNum }}</span>\r\n          </li>\r\n          <li class=\"cart-list-con7\">\r\n            <a href=\"javascript:void(0)\" class=\"sindelet\" @click=\"deleteCart(item.skuId)\">删除</a>\r\n            <br>\r\n            <a href=\"#none\">移到收藏</a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div class=\"cart-tool\">\r\n      <div class=\"select-all\">\r\n        <input class=\"chooseAll\" type=\"checkbox\" :checked=\"isAllChecked\" @change=\"handleAllChecked\">\r\n        <span>全选</span>\r\n      </div>\r\n      <div class=\"option\">\r\n        <a href=\"javascript:void(0)\" @click=\"deleteAllChecked\">删除选中的商品</a>\r\n        <a href=\"#none\">移到我的关注</a>\r\n        <a href=\"#none\">清除下柜商品</a>\r\n      </div>\r\n      <div class=\"money-box\">\r\n        <div class=\"chosed\">已选择\r\n          <span>{{ totalChecked }}</span>件商品\r\n        </div>\r\n        <div class=\"sumprice\">\r\n          <em>总价（不含运费） ：</em>\r\n          <i class=\"summoney\">¥ {{ totalPrice }}</i>\r\n        </div>\r\n        <div class=\"sumbtn\">\r\n          <router-link class=\"sum-btn\" to=\"/trade\">结算</router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport useShopcartStore from '@/store/Shopcart'\r\nimport useDetailStore from '@/store/Detail'\r\nimport { storeToRefs } from 'pinia'\r\nimport { computed, onMounted } from 'vue';\r\nconst store = useShopcartStore()\r\nconst detailStore = useDetailStore()\r\nlet { cartList, cartInfoList } = storeToRefs(store)\r\nonMounted(() => {\r\n  store.getCartList()\r\n})\r\nlet totalPrice = computed(() => {\r\n  let sum = 0\r\n  cartInfoList.value.forEach(element => {\r\n    if (element.isChecked == 1) {\r\n      sum += element.skuPrice * element.skuNum\r\n    }\r\n  })\r\n  return sum\r\n})\r\nlet totalChecked = computed(() => {\r\n  let sum = 0\r\n  cartInfoList.value.forEach(element => {\r\n    if (element.isChecked == 1) {\r\n      sum += 1\r\n    }\r\n  })\r\n  return sum\r\n})\r\nlet isAllChecked = computed(() => {\r\n  return cartInfoList.value.every(item => item.isChecked == 1)\r\n})\r\nasync function handleCheck(item) {\r\n  try {\r\n    await store.updateCheckedById(item.skuId, 1 - item.isChecked)\r\n    store.getCartList()\r\n  } catch (error) {\r\n    alert(error.message)\r\n  }\r\n}\r\nasync function handler(type, disNum, cart) {\r\n  switch (type) {\r\n    case 'plus':\r\n      disNum = 1\r\n      break\r\n    case 'mins':\r\n      disNum = cart.skuNum > 1 ? -1 : 0\r\n      break\r\n    case 'change':\r\n      disNum = (isNaN(disNum) || disNum < 1) ? 0 : parseInt(disNum) - cart.skuNum\r\n      break\r\n  }\r\n  try {\r\n    await detailStore.addOrUpdateShopCar(cart.skuId, disNum)\r\n    store.getCartList()\r\n  } catch (error) {\r\n    alert(error.message)\r\n  }\r\n}\r\nasync function deleteCart(skuId) {\r\n  try {\r\n    await store.deleteCartById(skuId)\r\n    store.getCartList()\r\n  } catch (error) {\r\n    alert(error.message)\r\n  }\r\n}\r\nasync function deleteAllChecked() {\r\n  try {\r\n    await store.deleteAllCheckedCart()\r\n    store.getCartList()\r\n  } catch (error) {\r\n    alert(error.message)\r\n  }\r\n}\r\nasync function handleAllChecked() {\r\n  let isChecked = 1 - isAllChecked.value\r\n  try {\r\n    await store.updateAllChecked(isChecked)\r\n    store.getCartList()\r\n  } catch (error) {\r\n    alert(error.message)\r\n  }\r\n}\r\n</script>\r\n<script>\r\nexport default {\r\n  name: 'ShopCart',\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n}\r\n\r\ninput[type=\"number\"] {\r\n  -moz-appearance: textfield;\r\n  outline: none;\r\n}\r\n\r\n.empty {\r\n  margin: 0 auto;\r\n\r\n  .item {\r\n    margin: 0 500px;\r\n\r\n    .left {\r\n      float: left !important;\r\n    }\r\n\r\n    .right {\r\n      float: left;\r\n\r\n      div {\r\n        width: 300px;\r\n        font-size: 16px;\r\n        margin-left: -120px;\r\n      }\r\n\r\n      a {\r\n        font-size: 13px;\r\n      }\r\n\r\n      a:hover {\r\n        color: #FF4610;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.cart {\r\n  width: 1200px;\r\n  margin: 0 auto;\r\n\r\n  h4 {\r\n    margin: 9px 0;\r\n    font-size: 14px;\r\n    line-height: 21px;\r\n  }\r\n\r\n  .cart-main {\r\n    .cart-th {\r\n      background: #f5f5f5;\r\n      border: 1px solid #ddd;\r\n      padding: 10px;\r\n      overflow: hidden;\r\n\r\n      &>div {\r\n        float: left;\r\n      }\r\n\r\n      .cart-th1 {\r\n        width: 25%;\r\n\r\n        input {\r\n          vertical-align: middle;\r\n        }\r\n\r\n        span {\r\n          vertical-align: middle;\r\n        }\r\n      }\r\n\r\n      .cart-th2 {\r\n        width: 25%;\r\n      }\r\n\r\n      .cart-th3,\r\n      .cart-th4,\r\n      .cart-th5,\r\n      .cart-th6 {\r\n        width: 12.5%;\r\n\r\n      }\r\n    }\r\n\r\n    .cart-body {\r\n      margin: 15px 0;\r\n      border: 1px solid #ddd;\r\n\r\n      .cart-list {\r\n        padding: 10px;\r\n        border-bottom: 1px solid #ddd;\r\n        overflow: hidden;\r\n\r\n        &>li {\r\n          float: left;\r\n        }\r\n\r\n        .cart-list-con1 {\r\n          width: 4.1667%;\r\n        }\r\n\r\n        .cart-list-con2 {\r\n          width: 30%;\r\n\r\n          img {\r\n            width: 82px;\r\n            height: 82px;\r\n            float: left;\r\n          }\r\n\r\n          .item-msg {\r\n            float: left;\r\n            width: 230px;\r\n            margin: 0 20px;\r\n            line-height: 18px;\r\n          }\r\n        }\r\n\r\n        .cart-list-con3 {\r\n          width: 15.8333%;\r\n\r\n          .item-txt {\r\n            text-align: center;\r\n          }\r\n        }\r\n\r\n        .cart-list-con4 {\r\n          width: 12.5%;\r\n\r\n        }\r\n\r\n        .cart-list-con5 {\r\n          width: 12.5%;\r\n\r\n          .mins {\r\n            border: 1px solid #ddd;\r\n            border-right: 0;\r\n            float: left;\r\n            color: #666;\r\n            width: 6px;\r\n            text-align: center;\r\n            padding: 8px;\r\n          }\r\n\r\n          input {\r\n            border: 1px solid #ddd;\r\n            width: 40px;\r\n            height: 33px;\r\n            float: left;\r\n            text-align: center;\r\n            font-size: 14px;\r\n          }\r\n\r\n          .plus {\r\n            border: 1px solid #ddd;\r\n            border-left: 0;\r\n            float: left;\r\n            color: #666;\r\n            width: 6px;\r\n            text-align: center;\r\n            padding: 8px;\r\n          }\r\n        }\r\n\r\n        .cart-list-con6 {\r\n          width: 12.5%;\r\n\r\n          .sum {\r\n            font-size: 16px;\r\n          }\r\n        }\r\n\r\n        .cart-list-con7 {\r\n          width: 12.5%;\r\n\r\n          a {\r\n            color: #666;\r\n          }\r\n\r\n          a:hover {\r\n            color: #FF4610;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .cart-tool {\r\n    overflow: hidden;\r\n    border: 1px solid #ddd;\r\n    margin-bottom: 10px;\r\n\r\n    .select-all {\r\n      padding: 10px;\r\n      overflow: hidden;\r\n      float: left;\r\n      line-height: 34px;\r\n\r\n      span {\r\n        vertical-align: middle;\r\n      }\r\n\r\n      input {\r\n        vertical-align: middle;\r\n      }\r\n    }\r\n\r\n    .option {\r\n      line-height: 34px;\r\n      padding: 10px;\r\n      overflow: hidden;\r\n      float: left;\r\n\r\n      a {\r\n        float: left;\r\n        padding: 0 10px;\r\n        color: #666;\r\n      }\r\n    }\r\n\r\n    .money-box {\r\n      float: right;\r\n\r\n      .chosed {\r\n        line-height: 54px;\r\n        float: left;\r\n        padding: 0 10px;\r\n      }\r\n\r\n      .sumprice {\r\n        width: 200px;\r\n        line-height: 50px;\r\n        float: left;\r\n        padding: 0 10px;\r\n\r\n        .summoney {\r\n          color: #FF4610;\r\n          font-size: 16px;\r\n        }\r\n      }\r\n\r\n      .sumbtn {\r\n        float: right;\r\n\r\n        a {\r\n          display: block;\r\n          position: relative;\r\n          width: 96px;\r\n          height: 54px;\r\n          line-height: 54px;\r\n          color: #fff;\r\n          text-align: center;\r\n          font-size: 18px;\r\n          font-family: \"Microsoft YaHei\";\r\n          background: #FF4610;\r\n          overflow: hidden;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}