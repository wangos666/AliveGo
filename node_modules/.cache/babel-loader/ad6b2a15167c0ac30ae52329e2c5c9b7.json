{"ast":null,"code":"import { createWebHistory, createRouter } from 'vue-router';\nimport routes from './routes';\nimport useUserStore from '@/store/User';\nconst history = createWebHistory();\nconst router = createRouter({\n  history,\n  routes,\n\n  scrollBehavior(to, from, savedPosition) {\n    // 始终滚动到顶部\n    return {\n      top: 0\n    };\n  }\n\n});\nrouter.beforeEach((to, from, next) => {\n  const store = useUserStore();\n\n  if (store.$state.token) {\n    if (to.path === '/login') {\n      next('/home');\n    }\n  } else {\n    if (to.meta.title) {\n      document.title = to.meta.title;\n    }\n\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createWebHistory","createRouter","routes","useUserStore","history","router","scrollBehavior","to","from","savedPosition","top","beforeEach","next","store","$state","token","path","meta","title","document"],"sources":["D:/web/Vue/shop/src/router/index.js"],"sourcesContent":["import { createWebHistory, createRouter } from 'vue-router'\r\nimport routes from './routes'\r\nimport useUserStore from '@/store/User'\r\nconst history = createWebHistory();\r\nconst router = createRouter({\r\n    history,\r\n    routes,\r\n    scrollBehavior(to, from, savedPosition) {\r\n        // 始终滚动到顶部\r\n        return { top: 0 }\r\n    },\r\n})\r\nrouter.beforeEach((to, from, next) => {\r\n    const store = useUserStore()\r\n    if (store.$state.token) {\r\n        if (to.path === '/login') {\r\n            next('/home')\r\n        }\r\n    } else {\r\n        if (to.meta.title) {\r\n            document.title = to.meta.title\r\n        }\r\n        next()\r\n    }\r\n\r\n\r\n})\r\nexport default router\r\n"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,YAA3B,QAA+C,YAA/C;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,YAAP,MAAyB,cAAzB;AACA,MAAMC,OAAO,GAAGJ,gBAAgB,EAAhC;AACA,MAAMK,MAAM,GAAGJ,YAAY,CAAC;EACxBG,OADwB;EAExBF,MAFwB;;EAGxBI,cAAc,CAACC,EAAD,EAAKC,IAAL,EAAWC,aAAX,EAA0B;IACpC;IACA,OAAO;MAAEC,GAAG,EAAE;IAAP,CAAP;EACH;;AANuB,CAAD,CAA3B;AAQAL,MAAM,CAACM,UAAP,CAAkB,CAACJ,EAAD,EAAKC,IAAL,EAAWI,IAAX,KAAoB;EAClC,MAAMC,KAAK,GAAGV,YAAY,EAA1B;;EACA,IAAIU,KAAK,CAACC,MAAN,CAAaC,KAAjB,EAAwB;IACpB,IAAIR,EAAE,CAACS,IAAH,KAAY,QAAhB,EAA0B;MACtBJ,IAAI,CAAC,OAAD,CAAJ;IACH;EACJ,CAJD,MAIO;IACH,IAAIL,EAAE,CAACU,IAAH,CAAQC,KAAZ,EAAmB;MACfC,QAAQ,CAACD,KAAT,GAAiBX,EAAE,CAACU,IAAH,CAAQC,KAAzB;IACH;;IACDN,IAAI;EACP;AAGJ,CAdD;AAeA,eAAeP,MAAf"},"metadata":{},"sourceType":"module"}